#include <iostream>
#include <sys/ipc.h>
#include <sys/shm.h>
#include <stdio.h>
using namespace std;

int main() {
	key_t my_key = ftok("shmfile", 65); //Generate a unique key (ID) for shared memory.
	 if (my_key == -1) {
        perror("ftok failed");
        exit(1);
    }
	
	int shmid = shmget(my_key, 1024, 0666|IPC_CREAT); //Creates or gets a shared memory segment.
	if (shmid == -1) {
        perror("shmget failed");
        exit(1);
    }
	
	char *str = (char *) shmat(shmid, (void *)0, 0);
	
	printf("\nWrite data: ");
	fgets(str, 50, stdin);
	
	printf("\nData written in memory %s", str);
	shmdt(str);
	
	return 0;
}